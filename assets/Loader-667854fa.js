import{_ as _e}from"./Preload-529be23d.js";import{r as d,c as Ve,j as He,a as Ke}from"./index-8beb32d0.js";import{V as N,u as $,d as Ze,v as $e,K as pe,J as Q,ae as Be,af as we,ag as Ge,ah as ce,ai as le,ad as Ye,aj as Fe,j as Z}from"./index-43782085.esm-153d635e.js";const ge=new N,Ne=new N,qe=new N;function Qe(i,o,a){const e=ge.setFromMatrixPosition(i.matrixWorld);e.project(o);const y=a.width/2,v=a.height/2;return[e.x*y+y,-(e.y*v)+v]}function Je(i,o){const a=ge.setFromMatrixPosition(i.matrixWorld),e=Ne.setFromMatrixPosition(o.matrixWorld),y=a.sub(e),v=o.getWorldDirection(qe);return y.angleTo(v)>Math.PI/2}function et(i,o,a,e){const y=ge.setFromMatrixPosition(i.matrixWorld),v=y.clone();v.project(o),a.setFromCamera(v,o);const O=a.intersectObjects(e,!0);if(O.length){const c=O[0].distance;return y.distanceTo(a.ray.origin)<c}return!0}function tt(i,o){if(o instanceof pe)return o.zoom;if(o instanceof Q){const a=ge.setFromMatrixPosition(i.matrixWorld),e=Ne.setFromMatrixPosition(o.matrixWorld),y=o.fov*Math.PI/180,v=a.distanceTo(e);return 1/(2*Math.tan(y/2)*v)}else return 1}function nt(i,o,a){if(o instanceof Q||o instanceof pe){const e=ge.setFromMatrixPosition(i.matrixWorld),y=Ne.setFromMatrixPosition(o.matrixWorld),v=e.distanceTo(y),O=(a[1]-a[0])/(o.far-o.near),c=a[1]-O*o.far;return Math.round(O*v+c)}}const Ie=i=>Math.abs(i)<1e-10?0:i;function Ue(i,o,a=""){let e="matrix3d(";for(let y=0;y!==16;y++)e+=Ie(o[y]*i.elements[y])+(y!==15?",":")");return a+e}const ot=(i=>o=>Ue(o,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),it=(i=>(o,a)=>Ue(o,i(a),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function at(i){return i&&typeof i=="object"&&"current"in i}const st=d.forwardRef(({children:i,eps:o=.001,style:a,className:e,prepend:y,center:v,fullscreen:O,portal:c,distanceFactor:f,sprite:ne=!1,transform:u=!1,occlude:m,onOcclude:U,castShadow:k,receiveShadow:B,material:D,geometry:L,zIndexRange:A=[16777271,0],calculatePosition:j=Qe,as:R="div",wrapperClass:g,pointerEvents:p="auto",...P},C)=>{const{gl:l,camera:E,scene:ye,size:M,raycaster:ue,events:ve,viewport:Pe}=$(),[x]=d.useState(()=>document.createElement(R)),z=d.useRef(),w=d.useRef(null),de=d.useRef(0),J=d.useRef([0,0]),ee=d.useRef(null),oe=d.useRef(null),G=(c==null?void 0:c.current)||ve.connected||l.domElement.parentNode,H=d.useRef(null),ie=d.useRef(!1),ae=d.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&at(m[0]),[m]);d.useLayoutEffect(()=>{const S=l.domElement;m&&m==="blending"?(S.style.zIndex=`${Math.floor(A[0]/2)}`,S.style.position="absolute",S.style.pointerEvents="none"):(S.style.zIndex=null,S.style.position=null,S.style.pointerEvents=null)},[m]),d.useLayoutEffect(()=>{if(w.current){const S=z.current=Ve(x);if(ye.updateMatrixWorld(),u)x.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const b=j(w.current,E,M);x.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${b[0]}px,${b[1]}px,0);transform-origin:0 0;`}return G&&(y?G.prepend(x):G.appendChild(x)),()=>{G&&G.removeChild(x),S.unmount()}}},[G,u]),d.useLayoutEffect(()=>{g&&(x.className=g)},[g]);const Ee=d.useMemo(()=>u?{position:"absolute",top:0,left:0,width:M.width,height:M.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:v?"translate3d(-50%,-50%,0)":"none",...O&&{top:-M.height/2,left:-M.width/2,width:M.width,height:M.height},...a},[a,v,O,M,u]),Me=d.useMemo(()=>({position:"absolute",pointerEvents:p}),[p]);d.useLayoutEffect(()=>{if(ie.current=!1,u){var S;(S=z.current)==null||S.render(d.createElement("div",{ref:ee,style:Ee},d.createElement("div",{ref:oe,style:Me},d.createElement("div",{ref:C,className:e,style:a,children:i}))))}else{var b;(b=z.current)==null||b.render(d.createElement("div",{ref:C,style:Ee,className:e,children:i}))}});const X=d.useRef(!0);Ze(S=>{if(w.current){E.updateMatrixWorld(),w.current.updateWorldMatrix(!0,!1);const b=u?J.current:j(w.current,E,M);if(u||Math.abs(de.current-E.zoom)>o||Math.abs(J.current[0]-b[0])>o||Math.abs(J.current[1]-b[1])>o){const Y=Je(w.current,E);let I=!1;ae&&(m!=="blending"?I=[ye]:Array.isArray(m)&&(I=m.map(F=>F.current)));const q=X.current;if(I){const F=et(w.current,E,ue,I);X.current=F&&!Y}else X.current=!Y;q!==X.current&&(U?U(!X.current):x.style.display=X.current?"block":"none");const se=Math.floor(A[0]/2),Se=m?ae?[A[0],se]:[se-1,0]:A;if(x.style.zIndex=`${nt(w.current,E,Se)}`,u){const[F,re]=[M.width/2,M.height/2],te=E.projectionMatrix.elements[5]*re,{isOrthographicCamera:he,top:Ae,left:je,bottom:xe,right:Te}=E,De=ot(E.matrixWorldInverse),Le=he?`scale(${te})translate(${Ie(-(Te+je)/2)}px,${Ie((Ae+xe)/2)}px)`:`translateZ(${te}px)`;let W=w.current.matrixWorld;ne&&(W=E.matrixWorldInverse.clone().transpose().copyPosition(W).scale(w.current.scale),W.elements[3]=W.elements[7]=W.elements[11]=0,W.elements[15]=1),x.style.width=M.width+"px",x.style.height=M.height+"px",x.style.perspective=he?"":`${te}px`,ee.current&&oe.current&&(ee.current.style.transform=`${Le}${De}translate(${F}px,${re}px)`,oe.current.style.transform=it(W,1/((f||10)/400)))}else{const F=f===void 0?1:tt(w.current,E)*f;x.style.transform=`translate3d(${b[0]}px,${b[1]}px,0) scale(${F})`}J.current=b,de.current=E.zoom}}if(!ae&&H.current&&!ie.current)if(u){if(ee.current){const b=ee.current.children[0];if(b!=null&&b.clientWidth&&b!=null&&b.clientHeight){const{isOrthographicCamera:Y}=E;if(Y||L)P.scale&&(Array.isArray(P.scale)?P.scale instanceof N?H.current.scale.copy(P.scale.clone().divideScalar(1)):H.current.scale.set(1/P.scale[0],1/P.scale[1],1/P.scale[2]):H.current.scale.setScalar(1/P.scale));else{const I=(f||10)/400,q=b.clientWidth*I,se=b.clientHeight*I;H.current.scale.set(q,se,1)}ie.current=!0}}}else{const b=x.children[0];if(b!=null&&b.clientWidth&&b!=null&&b.clientHeight){const Y=1/Pe.factor,I=b.clientWidth*Y,q=b.clientHeight*Y;H.current.scale.set(I,q,1),ie.current=!0}H.current.lookAt(S.camera.position)}});const fe=d.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return d.createElement("group",_e({},P,{ref:w}),m&&!ae&&d.createElement("mesh",{castShadow:k,receiveShadow:B,ref:H},L||d.createElement("planeGeometry",null),D||d.createElement("shaderMaterial",{side:$e,vertexShader:fe.vertexShader,fragmentShader:fe.fragmentShader})))});let me=0;const rt=Be(i=>(we.onStart=(o,a,e)=>{i({active:!0,item:o,loaded:a,total:e,progress:(a-me)/(e-me)*100})},we.onLoad=()=>{i({active:!1})},we.onError=o=>i(a=>({errors:[...a.errors,o]})),we.onProgress=(o,a,e)=>{a===e&&(me=e),i({active:!0,item:o,loaded:a,total:e,progress:(a-me)/(e-me)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function be(i){return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},be(i)}function ct(i,o){if(be(i)!=="object"||i===null)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var e=a.call(i,o||"default");if(be(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}function lt(i){var o=ct(i,"string");return be(o)==="symbol"?o:String(o)}function r(i,o,a){return o=lt(o),o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}const We=(i,o)=>(i%o+o)%o;let ut=class extends Ge{constructor(o,a){super(),r(this,"object",void 0),r(this,"domElement",void 0),r(this,"enabled",!0),r(this,"target",new N),r(this,"minDistance",0),r(this,"maxDistance",1/0),r(this,"minZoom",0),r(this,"maxZoom",1/0),r(this,"minPolarAngle",0),r(this,"maxPolarAngle",Math.PI),r(this,"minAzimuthAngle",-1/0),r(this,"maxAzimuthAngle",1/0),r(this,"enableDamping",!1),r(this,"dampingFactor",.05),r(this,"enableZoom",!0),r(this,"zoomSpeed",1),r(this,"enableRotate",!0),r(this,"rotateSpeed",1),r(this,"enablePan",!0),r(this,"panSpeed",1),r(this,"screenSpacePanning",!0),r(this,"keyPanSpeed",7),r(this,"autoRotate",!1),r(this,"autoRotateSpeed",2),r(this,"reverseOrbit",!1),r(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),r(this,"mouseButtons",{LEFT:ce.ROTATE,MIDDLE:ce.DOLLY,RIGHT:ce.PAN}),r(this,"touches",{ONE:le.ROTATE,TWO:le.DOLLY_PAN}),r(this,"target0",void 0),r(this,"position0",void 0),r(this,"zoom0",void 0),r(this,"_domElementKeyEvents",null),r(this,"getPolarAngle",void 0),r(this,"getAzimuthalAngle",void 0),r(this,"setPolarAngle",void 0),r(this,"setAzimuthalAngle",void 0),r(this,"getDistance",void 0),r(this,"listenToKeyEvents",void 0),r(this,"saveState",void 0),r(this,"reset",void 0),r(this,"update",void 0),r(this,"connect",void 0),r(this,"dispose",void 0),this.object=o,this.domElement=a,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Q?this.object.zoom:1,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=t=>{let n=We(t,2*Math.PI),s=u.phi;s<0&&(s+=2*Math.PI),n<0&&(n+=2*Math.PI);let h=Math.abs(n-s);2*Math.PI-h<h&&(n<s?n+=2*Math.PI:s+=2*Math.PI),m.phi=n-s,e.update()},this.setAzimuthalAngle=t=>{let n=We(t,2*Math.PI),s=u.theta;s<0&&(s+=2*Math.PI),n<0&&(n+=2*Math.PI);let h=Math.abs(n-s);2*Math.PI-h<h&&(n<s?n+=2*Math.PI:s+=2*Math.PI),m.theta=n-s,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",Te),this._domElementKeyEvents=t},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object instanceof Q?e.object.zoom:1},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object instanceof Q&&(e.object.zoom=e.zoom0,e.object.updateProjectionMatrix()),e.dispatchEvent(y),e.update(),f=c.NONE},this.update=(()=>{const t=new N,n=new Ye().setFromUnitVectors(o.up,new N(0,1,0)),s=n.clone().invert(),h=new N,T=new Ye,_=2*Math.PI;return function(){const ze=e.object.position;t.copy(ze).sub(e.target),t.applyQuaternion(n),u.setFromVector3(t),e.autoRotate&&f===c.NONE&&ue(ye()),e.enableDamping?(u.theta+=m.theta*e.dampingFactor,u.phi+=m.phi*e.dampingFactor):(u.theta+=m.theta,u.phi+=m.phi);let V=e.minAzimuthAngle,K=e.maxAzimuthAngle;return isFinite(V)&&isFinite(K)&&(V<-Math.PI?V+=_:V>Math.PI&&(V-=_),K<-Math.PI?K+=_:K>Math.PI&&(K-=_),V<=K?u.theta=Math.max(V,Math.min(K,u.theta)):u.theta=u.theta>(V+K)/2?Math.max(V,u.theta):Math.min(K,u.theta)),u.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=U,u.radius=Math.max(e.minDistance,Math.min(e.maxDistance,u.radius)),e.enableDamping===!0?e.target.addScaledVector(k,e.dampingFactor):e.target.add(k),t.setFromSpherical(u),t.applyQuaternion(s),ze.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(m.theta*=1-e.dampingFactor,m.phi*=1-e.dampingFactor,k.multiplyScalar(1-e.dampingFactor)):(m.set(0,0,0),k.set(0,0,0)),U=1,B||h.distanceToSquared(e.object.position)>ne||8*(1-T.dot(e.object.quaternion))>ne?(e.dispatchEvent(y),h.copy(e.object.position),T.copy(e.object.quaternion),B=!1,!0):!1}})(),this.connect=t=>{t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",W),e.domElement.addEventListener("pointerdown",F),e.domElement.addEventListener("pointercancel",he),e.domElement.addEventListener("wheel",xe)},this.dispose=()=>{var t,n,s,h,T,_;(t=e.domElement)===null||t===void 0||t.removeEventListener("contextmenu",W),(n=e.domElement)===null||n===void 0||n.removeEventListener("pointerdown",F),(s=e.domElement)===null||s===void 0||s.removeEventListener("pointercancel",he),(h=e.domElement)===null||h===void 0||h.removeEventListener("wheel",xe),(T=e.domElement)===null||T===void 0||T.ownerDocument.removeEventListener("pointermove",re),(_=e.domElement)===null||_===void 0||_.ownerDocument.removeEventListener("pointerup",te),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Te)};const e=this,y={type:"change"},v={type:"start"},O={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const ne=1e-6,u=new Fe,m=new Fe;let U=1;const k=new N;let B=!1;const D=new Z,L=new Z,A=new Z,j=new Z,R=new Z,g=new Z,p=new Z,P=new Z,C=new Z,l=[],E={};function ye(){return 2*Math.PI/60/60*e.autoRotateSpeed}function M(){return Math.pow(.95,e.zoomSpeed)}function ue(t){e.reverseOrbit?m.theta+=t:m.theta-=t}function ve(t){e.reverseOrbit?m.phi+=t:m.phi-=t}const Pe=(()=>{const t=new N;return function(s,h){t.setFromMatrixColumn(h,0),t.multiplyScalar(-s),k.add(t)}})(),x=(()=>{const t=new N;return function(s,h){e.screenSpacePanning===!0?t.setFromMatrixColumn(h,1):(t.setFromMatrixColumn(h,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(s),k.add(t)}})(),z=(()=>{const t=new N;return function(s,h){const T=e.domElement;if(T&&e.object instanceof Q&&e.object.isPerspectiveCamera){const _=e.object.position;t.copy(_).sub(e.target);let Oe=t.length();Oe*=Math.tan(e.object.fov/2*Math.PI/180),Pe(2*s*Oe/T.clientHeight,e.object.matrix),x(2*h*Oe/T.clientHeight,e.object.matrix)}else T&&e.object instanceof pe&&e.object.isOrthographicCamera?(Pe(s*(e.object.right-e.object.left)/e.object.zoom/T.clientWidth,e.object.matrix),x(h*(e.object.top-e.object.bottom)/e.object.zoom/T.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function w(t){e.object instanceof Q&&e.object.isPerspectiveCamera?U/=t:e.object instanceof pe&&e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*t)),e.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function de(t){e.object instanceof Q&&e.object.isPerspectiveCamera?U*=t:e.object instanceof pe&&e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/t)),e.object.updateProjectionMatrix(),B=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function J(t){D.set(t.clientX,t.clientY)}function ee(t){p.set(t.clientX,t.clientY)}function oe(t){j.set(t.clientX,t.clientY)}function G(t){L.set(t.clientX,t.clientY),A.subVectors(L,D).multiplyScalar(e.rotateSpeed);const n=e.domElement;n&&(ue(2*Math.PI*A.x/n.clientHeight),ve(2*Math.PI*A.y/n.clientHeight)),D.copy(L),e.update()}function H(t){P.set(t.clientX,t.clientY),C.subVectors(P,p),C.y>0?w(M()):C.y<0&&de(M()),p.copy(P),e.update()}function ie(t){R.set(t.clientX,t.clientY),g.subVectors(R,j).multiplyScalar(e.panSpeed),z(g.x,g.y),j.copy(R),e.update()}function ae(t){t.deltaY<0?de(M()):t.deltaY>0&&w(M()),e.update()}function Ee(t){let n=!1;switch(t.code){case e.keys.UP:z(0,e.keyPanSpeed),n=!0;break;case e.keys.BOTTOM:z(0,-e.keyPanSpeed),n=!0;break;case e.keys.LEFT:z(e.keyPanSpeed,0),n=!0;break;case e.keys.RIGHT:z(-e.keyPanSpeed,0),n=!0;break}n&&(t.preventDefault(),e.update())}function Me(){if(l.length==1)D.set(l[0].pageX,l[0].pageY);else{const t=.5*(l[0].pageX+l[1].pageX),n=.5*(l[0].pageY+l[1].pageY);D.set(t,n)}}function X(){if(l.length==1)j.set(l[0].pageX,l[0].pageY);else{const t=.5*(l[0].pageX+l[1].pageX),n=.5*(l[0].pageY+l[1].pageY);j.set(t,n)}}function fe(){const t=l[0].pageX-l[1].pageX,n=l[0].pageY-l[1].pageY,s=Math.sqrt(t*t+n*n);p.set(0,s)}function S(){e.enableZoom&&fe(),e.enablePan&&X()}function b(){e.enableZoom&&fe(),e.enableRotate&&Me()}function Y(t){if(l.length==1)L.set(t.pageX,t.pageY);else{const s=Re(t),h=.5*(t.pageX+s.x),T=.5*(t.pageY+s.y);L.set(h,T)}A.subVectors(L,D).multiplyScalar(e.rotateSpeed);const n=e.domElement;n&&(ue(2*Math.PI*A.x/n.clientHeight),ve(2*Math.PI*A.y/n.clientHeight)),D.copy(L)}function I(t){if(l.length==1)R.set(t.pageX,t.pageY);else{const n=Re(t),s=.5*(t.pageX+n.x),h=.5*(t.pageY+n.y);R.set(s,h)}g.subVectors(R,j).multiplyScalar(e.panSpeed),z(g.x,g.y),j.copy(R)}function q(t){const n=Re(t),s=t.pageX-n.x,h=t.pageY-n.y,T=Math.sqrt(s*s+h*h);P.set(0,T),C.set(0,Math.pow(P.y/p.y,e.zoomSpeed)),w(C.y),p.copy(P)}function se(t){e.enableZoom&&q(t),e.enablePan&&I(t)}function Se(t){e.enableZoom&&q(t),e.enableRotate&&Y(t)}function F(t){if(e.enabled!==!1){if(l.length===0){var n,s;(n=e.domElement)===null||n===void 0||n.ownerDocument.addEventListener("pointermove",re),(s=e.domElement)===null||s===void 0||s.ownerDocument.addEventListener("pointerup",te)}Xe(t),t.pointerType==="touch"?De(t):Ae(t)}}function re(t){e.enabled!==!1&&(t.pointerType==="touch"?Le(t):je(t))}function te(t){if(Ce(t),l.length===0){var n,s,h;(n=e.domElement)===null||n===void 0||n.releasePointerCapture(t.pointerId),(s=e.domElement)===null||s===void 0||s.ownerDocument.removeEventListener("pointermove",re),(h=e.domElement)===null||h===void 0||h.ownerDocument.removeEventListener("pointerup",te)}e.dispatchEvent(O),f=c.NONE}function he(t){Ce(t)}function Ae(t){let n;switch(t.button){case 0:n=e.mouseButtons.LEFT;break;case 1:n=e.mouseButtons.MIDDLE;break;case 2:n=e.mouseButtons.RIGHT;break;default:n=-1}switch(n){case ce.DOLLY:if(e.enableZoom===!1)return;ee(t),f=c.DOLLY;break;case ce.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;oe(t),f=c.PAN}else{if(e.enableRotate===!1)return;J(t),f=c.ROTATE}break;case ce.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;J(t),f=c.ROTATE}else{if(e.enablePan===!1)return;oe(t),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&e.dispatchEvent(v)}function je(t){if(e.enabled!==!1)switch(f){case c.ROTATE:if(e.enableRotate===!1)return;G(t);break;case c.DOLLY:if(e.enableZoom===!1)return;H(t);break;case c.PAN:if(e.enablePan===!1)return;ie(t);break}}function xe(t){e.enabled===!1||e.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||(t.preventDefault(),e.dispatchEvent(v),ae(t),e.dispatchEvent(O))}function Te(t){e.enabled===!1||e.enablePan===!1||Ee(t)}function De(t){switch(ke(t),l.length){case 1:switch(e.touches.ONE){case le.ROTATE:if(e.enableRotate===!1)return;Me(),f=c.TOUCH_ROTATE;break;case le.PAN:if(e.enablePan===!1)return;X(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(e.touches.TWO){case le.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;S(),f=c.TOUCH_DOLLY_PAN;break;case le.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;b(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&e.dispatchEvent(v)}function Le(t){switch(ke(t),f){case c.TOUCH_ROTATE:if(e.enableRotate===!1)return;Y(t),e.update();break;case c.TOUCH_PAN:if(e.enablePan===!1)return;I(t),e.update();break;case c.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;se(t),e.update();break;case c.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Se(t),e.update();break;default:f=c.NONE}}function W(t){e.enabled!==!1&&t.preventDefault()}function Xe(t){l.push(t)}function Ce(t){delete E[t.pointerId];for(let n=0;n<l.length;n++)if(l[n].pointerId==t.pointerId){l.splice(n,1);return}}function ke(t){let n=E[t.pointerId];n===void 0&&(n=new Z,E[t.pointerId]=n),n.set(t.pageX,t.pageY)}function Re(t){const n=t.pointerId===l[0].pointerId?l[1]:l[0];return E[n.pointerId]}a!==void 0&&this.connect(a),this.update()}};const pt=d.forwardRef(({makeDefault:i,camera:o,regress:a,domElement:e,enableDamping:y=!0,onChange:v,onStart:O,onEnd:c,...f},ne)=>{const u=$(p=>p.invalidate),m=$(p=>p.camera),U=$(p=>p.gl),k=$(p=>p.events),B=$(p=>p.setEvents),D=$(p=>p.set),L=$(p=>p.get),A=$(p=>p.performance),j=o||m,R=e||k.connected||U.domElement,g=d.useMemo(()=>new ut(j),[j]);return Ze(()=>{g.enabled&&g.update()},-1),d.useEffect(()=>(g.connect(R),()=>void g.dispose()),[R,a,g,u]),d.useEffect(()=>{const p=l=>{u(),a&&A.regress(),v&&v(l)},P=l=>{O&&O(l)},C=l=>{c&&c(l)};return g.addEventListener("change",p),g.addEventListener("start",P),g.addEventListener("end",C),()=>{g.removeEventListener("start",P),g.removeEventListener("end",C),g.removeEventListener("change",p)}},[v,O,c,g,u,B]),d.useEffect(()=>{if(i){const p=L().controls;return D({controls:g}),()=>D({controls:p})}},[i,g]),d.createElement("primitive",_e({ref:ne,object:g,enableDamping:y},f))}),bt=()=>{const{progress:i}=rt();return He(st,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Ke("span",{className:"canvas-loader"}),He("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[i.toFixed(2),"%"]})]})};export{bt as C,pt as O};
